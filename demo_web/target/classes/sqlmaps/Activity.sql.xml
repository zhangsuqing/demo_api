<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.yoren.srs.demo.domain.dao.ActivityMapper">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="cn.yoren.srs.demo.common.entity.ActivityBean" id="activityMap">
        <result property="id" column="id"/>
        <result property="activityCode" column="activity_code"/>
        <result property="activityName" column="activity_name"/>
        <result property="activityTimeStart" column="activity_time_start"/>
        <result property="activityTimeEnd" column="activity_time_end"/>
        <result property="createTime" column="create_time"/>
        <result property="createUser" column="create_user"/>
        <result property="updateTime" column="update_time"/>
        <result property="updateUser" column="update_user"/>
        <result property="status" column="status"/>
        <result property="remark" column="remark"/>
        <result property="version" column="version"/>
    </resultMap>
    <sql id="Base_Column_List" >
      id, activity_code, activity_name, activity_time_start, activity_time_end, create_time, create_user, update_time,update_user,status,remark,version
    </sql>
    <!--根据活动id获取活动信息-->
    <select id="getActivityById" resultMap="activityMap">
        SELECT
            id,
            activity_code,
            activity_name,
            activity_time_start,
            activity_time_end,
            `status`,
            version,
            remark
        FROM
            ee_activity
        WHERE
            id = #{activityId}
            AND status != 0
    </select>
    <!--根据活动code获取活动信息-->
    <select id="getActivityByActivityCode" resultMap="activityMap">
        SELECT
            id,
            activity_code,
            activity_name,
            activity_time_start,
            activity_time_end,
            `status`,
            version,
            remark
        FROM
            ee_activity
        WHERE
            activity_code = #{activityCode}
            AND status != 0
    </select>
    <!--查看活动列表-->
    <select id="getActivityList" resultMap="activityMap">
        select
          <include refid="Base_Column_List" />
        from ee_activity
        where status != 0
        <if test="activityName !=null and activityName!=''">
            and instr(activity_name,#{activityName})
        </if>
        order by id desc
    </select>
    <!--新增活动-->
    <insert id="addActivity" parameterType="cn.yoren.srs.demo.common.entity.ActivityBean" useGeneratedKeys="true" keyProperty="id">
        insert into ee_activity (activity_code, activity_name,
          activity_time_start, activity_time_end, create_user,
          update_user, status, remark,
          version)
        values (#{activityCode,jdbcType=VARCHAR}, #{activityName,jdbcType=VARCHAR},
          #{activityTimeStart,jdbcType=TIMESTAMP},
          #{activityTimeEnd,jdbcType=TIMESTAMP}, #{createUser,jdbcType=VARCHAR}, #{updateUser,jdbcType=VARCHAR},
          #{status,jdbcType=INTEGER}, #{remark,jdbcType=VARCHAR}, #{version,jdbcType=INTEGER})
    </insert>
    <!--修改活动-->
    <update id="updateActivity" parameterType="cn.yoren.srs.demo.common.entity.ActivityBean">
        UPDATE
            ee_activity
        SET
            activity_name = #{activityName},
            status = #{status},
            activity_time_start = #{activityTimeStart},
            activity_time_end = #{activityTimeEnd},
            version = #{version},
            remark = #{remark}
        WHERE
            id = #{id}
    </update>
</mapper>